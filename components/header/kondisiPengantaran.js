import { useState, useEffect, useContext } from "react";
//MODAL
import OnlineModal from "components/modal/online";
import CallDriver from "components/modal/callDriver";
import { useRouter } from "next/router";

//CONTEXt
import { ButtonType } from "context/buttonType";
import { Status } from "context/onlineStatus";
import { OrderFound } from "context/orderFound";

const Pengantaran = () => {
  const Types = useContext(ButtonType);
  const Order = useContext(OrderFound);
  const Online = useContext(Status);
  const router = useRouter();

  useEffect(() => {
    console.log("DRIVER STATUS : ", Online.data.online);
  }, [Online.data.online]);

  useEffect(() => {
    console.log("ORDER STATUS : ", Order.data.orderFound);
  }, [Order.data.orderFound]);

  useEffect(() => {
    console.log(router.asPath);
  }, [router]);

  const [onlineModal, setOnlineModal] = useState(false);
  const handleOpenOnlineModal = () => setOnlineModal(true);
  const handleCloseOnlineModal = () => setOnlineModal(false);

  const [callDriver, setCallDriver] = useState(false);
  const handleOpenDriver = () => setCallDriver(true);
  const handleCloseDriver = () => setCallDriver(false);

  return (
    <div>
      <CallDriver
        callDriver={callDriver}
        handleCloseDriver={handleCloseDriver}
      />
      <OnlineModal
        title={"Offline"}
        description={"Setelah offline, kamu nggak bisa nerima order."}
        onlineModal={onlineModal}
        handleCloseOnlineModal={handleCloseOnlineModal}
      />
      {router.asPath === "/auth" ? (
        <div className="w-full h-16 bg-custom-bg bg-opacity-70 backdrop-blur-2xl fixed top-0 p-4">
          {/*  */}
          <div className="flex items-center w-full h-full">
            <div className="flex items-center w-full justify-between">
              <div>
                <p className="text-lg font-bold text-custom-black">
                  Pengantaran
                </p>
              </div>
              <button
                className="bg-red-500 w-24"
                onClick={(e) => {
                  Types.set.setType("option");
                  router.push("auth/order/", "auth/order/");
                }}
              >
                <p className="text-white">KONDISI ADA ORDERAN</p>
              </button>
              <div>
                <button
                  onClick={
                    Online.data.online
                      ? () => Online.set.setOnline(!Online.data.online)
                      : handleOpenOnlineModal
                  }
                  className="outline-none"
                >
                  {Online.data.online ? (
                    <div>
                      <svg
                        width="88"
                        height="32"
                        viewBox="0 0 88 32"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <rect width="88" height="32" rx="16" fill="#E6E7E8" />
                        <circle cx="16" cy="16" r="12" fill="white" />
                        <circle cx="16" cy="16" r="6" fill="#E6E7E8" />
                        <path
                          d="M43.145 16.265C43.145 13.13 40.85 10.925 37.895 10.925C34.955 10.925 32.645 13.13 32.645 16.265C32.645 19.4 34.955 21.605 37.895 21.605C40.85 21.605 43.145 19.4 43.145 16.265ZM34.04 16.265C34.04 13.7 35.69 12.11 37.895 12.11C40.1 12.11 41.75 13.7 41.75 16.265C41.75 18.815 40.1 20.42 37.895 20.42C35.69 20.42 34.04 18.815 34.04 16.265ZM45.202 21.5H46.567V14.405H48.292V13.28H46.567V12.695C46.567 11.63 46.972 11.18 48.202 11.18V10.04C46.102 10.04 45.202 10.865 45.202 12.695V13.28H44.137V14.405H45.202V21.5ZM50.1385 21.5H51.5035V14.405H53.2285V13.28H51.5035V12.695C51.5035 11.63 51.9085 11.18 53.1385 11.18V10.04C51.0385 10.04 50.1385 10.865 50.1385 12.695V13.28H49.0735V14.405H50.1385V21.5ZM54.82 21.5H56.185V10.4H54.82V21.5ZM58.5114 21.5H59.8764V13.28H58.5114V21.5ZM59.2164 11.945C59.7114 11.945 60.1164 11.54 60.1164 11.015C60.1164 10.49 59.7114 10.085 59.2164 10.085C58.6914 10.085 58.2864 10.49 58.2864 11.015C58.2864 11.54 58.6914 11.945 59.2164 11.945ZM68.2179 21.5H69.5679V16.655C69.5679 14.3 68.1129 13.13 66.2079 13.13C65.0979 13.13 64.1079 13.595 63.5679 14.45V13.28H62.2029V21.5H63.5679V16.955C63.5679 15.185 64.5279 14.315 65.9229 14.315C67.3029 14.315 68.2179 15.17 68.2179 16.85V21.5ZM75.2926 14.3C76.7026 14.3 77.9026 15.185 77.8876 16.79H72.6976C72.8476 15.185 73.9576 14.3 75.2926 14.3ZM79.1326 18.965H77.6626C77.3626 19.85 76.5826 20.48 75.3526 20.48C73.9576 20.48 72.7876 19.565 72.6826 17.9H79.2526C79.2826 17.615 79.2976 17.375 79.2976 17.075C79.2976 14.825 77.7376 13.145 75.3526 13.145C72.9526 13.145 71.2876 14.78 71.2876 17.375C71.2876 19.985 73.0126 21.635 75.3526 21.635C77.3926 21.635 78.7126 20.465 79.1326 18.965Z"
                          fill="white"
                        />
                      </svg>
                    </div>
                  ) : (
                    <div>
                      <svg
                        width="88"
                        height="32"
                        viewBox="0 0 88 32"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <rect width="88" height="32" rx="16" fill="#4391EF" />
                        <path
                          d="M19.145 16.265C19.145 13.13 16.85 10.925 13.895 10.925C10.955 10.925 8.645 13.13 8.645 16.265C8.645 19.4 10.955 21.605 13.895 21.605C16.85 21.605 19.145 19.4 19.145 16.265ZM10.04 16.265C10.04 13.7 11.69 12.11 13.895 12.11C16.1 12.11 17.75 13.7 17.75 16.265C17.75 18.815 16.1 20.42 13.895 20.42C11.69 20.42 10.04 18.815 10.04 16.265ZM26.962 21.5H28.312V16.655C28.312 14.3 26.857 13.13 24.952 13.13C23.842 13.13 22.852 13.595 22.312 14.45V13.28H20.947V21.5H22.312V16.955C22.312 15.185 23.272 14.315 24.667 14.315C26.047 14.315 26.962 15.17 26.962 16.85V21.5ZM30.5417 21.5H31.9067V10.4H30.5417V21.5ZM34.2331 21.5H35.5981V13.28H34.2331V21.5ZM34.9381 11.945C35.4331 11.945 35.8381 11.54 35.8381 11.015C35.8381 10.49 35.4331 10.085 34.9381 10.085C34.4131 10.085 34.0081 10.49 34.0081 11.015C34.0081 11.54 34.4131 11.945 34.9381 11.945ZM43.9395 21.5H45.2895V16.655C45.2895 14.3 43.8345 13.13 41.9295 13.13C40.8195 13.13 39.8295 13.595 39.2895 14.45V13.28H37.9245V21.5H39.2895V16.955C39.2895 15.185 40.2495 14.315 41.6445 14.315C43.0245 14.315 43.9395 15.17 43.9395 16.85V21.5ZM51.0143 14.3C52.4243 14.3 53.6243 15.185 53.6093 16.79H48.4193C48.5693 15.185 49.6793 14.3 51.0143 14.3ZM54.8543 18.965H53.3843C53.0843 19.85 52.3043 20.48 51.0743 20.48C49.6793 20.48 48.5093 19.565 48.4043 17.9H54.9743C55.0043 17.615 55.0193 17.375 55.0193 17.075C55.0193 14.825 53.4593 13.145 51.0743 13.145C48.6743 13.145 47.0093 14.78 47.0093 17.375C47.0093 19.985 48.7343 21.635 51.0743 21.635C53.1143 21.635 54.4343 20.465 54.8543 18.965Z"
                          fill="white"
                        />
                        <circle cx="72" cy="16" r="12" fill="white" />
                        <circle cx="72" cy="16" r="6" fill="#4391EF" />
                      </svg>
                    </div>
                  )}
                </button>
              </div>
            </div>
          </div>
          {/*  */}
        </div>
      ) : router.asPath === "/auth/profile" ? (
        <div className="w-full h-16 bg-custom-bg bg-opacity-70 backdrop-blur-2xl fixed z-10 top-0 p-4">
          {/*  */}
          <div className="flex items-center w-full h-full">
            <div className="flex items-center w-full justify-between">
              <div>
                <p className="text-lg font-bold text-custom-black">Profile</p>
              </div>

              <div>
                <button
                  onClick={
                    Online.data.online
                      ? () => Online.set.setOnline(!Online.data.online)
                      : handleOpenOnlineModal
                  }
                  className="outline-none"
                >
                  {Online.data.online ? (
                    <div>
                      <svg
                        width="88"
                        height="32"
                        viewBox="0 0 88 32"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <rect width="88" height="32" rx="16" fill="#E6E7E8" />
                        <circle cx="16" cy="16" r="12" fill="white" />
                        <circle cx="16" cy="16" r="6" fill="#E6E7E8" />
                        <path
                          d="M43.145 16.265C43.145 13.13 40.85 10.925 37.895 10.925C34.955 10.925 32.645 13.13 32.645 16.265C32.645 19.4 34.955 21.605 37.895 21.605C40.85 21.605 43.145 19.4 43.145 16.265ZM34.04 16.265C34.04 13.7 35.69 12.11 37.895 12.11C40.1 12.11 41.75 13.7 41.75 16.265C41.75 18.815 40.1 20.42 37.895 20.42C35.69 20.42 34.04 18.815 34.04 16.265ZM45.202 21.5H46.567V14.405H48.292V13.28H46.567V12.695C46.567 11.63 46.972 11.18 48.202 11.18V10.04C46.102 10.04 45.202 10.865 45.202 12.695V13.28H44.137V14.405H45.202V21.5ZM50.1385 21.5H51.5035V14.405H53.2285V13.28H51.5035V12.695C51.5035 11.63 51.9085 11.18 53.1385 11.18V10.04C51.0385 10.04 50.1385 10.865 50.1385 12.695V13.28H49.0735V14.405H50.1385V21.5ZM54.82 21.5H56.185V10.4H54.82V21.5ZM58.5114 21.5H59.8764V13.28H58.5114V21.5ZM59.2164 11.945C59.7114 11.945 60.1164 11.54 60.1164 11.015C60.1164 10.49 59.7114 10.085 59.2164 10.085C58.6914 10.085 58.2864 10.49 58.2864 11.015C58.2864 11.54 58.6914 11.945 59.2164 11.945ZM68.2179 21.5H69.5679V16.655C69.5679 14.3 68.1129 13.13 66.2079 13.13C65.0979 13.13 64.1079 13.595 63.5679 14.45V13.28H62.2029V21.5H63.5679V16.955C63.5679 15.185 64.5279 14.315 65.9229 14.315C67.3029 14.315 68.2179 15.17 68.2179 16.85V21.5ZM75.2926 14.3C76.7026 14.3 77.9026 15.185 77.8876 16.79H72.6976C72.8476 15.185 73.9576 14.3 75.2926 14.3ZM79.1326 18.965H77.6626C77.3626 19.85 76.5826 20.48 75.3526 20.48C73.9576 20.48 72.7876 19.565 72.6826 17.9H79.2526C79.2826 17.615 79.2976 17.375 79.2976 17.075C79.2976 14.825 77.7376 13.145 75.3526 13.145C72.9526 13.145 71.2876 14.78 71.2876 17.375C71.2876 19.985 73.0126 21.635 75.3526 21.635C77.3926 21.635 78.7126 20.465 79.1326 18.965Z"
                          fill="white"
                        />
                      </svg>
                    </div>
                  ) : (
                    <div>
                      <svg
                        width="88"
                        height="32"
                        viewBox="0 0 88 32"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <rect width="88" height="32" rx="16" fill="#4391EF" />
                        <path
                          d="M19.145 16.265C19.145 13.13 16.85 10.925 13.895 10.925C10.955 10.925 8.645 13.13 8.645 16.265C8.645 19.4 10.955 21.605 13.895 21.605C16.85 21.605 19.145 19.4 19.145 16.265ZM10.04 16.265C10.04 13.7 11.69 12.11 13.895 12.11C16.1 12.11 17.75 13.7 17.75 16.265C17.75 18.815 16.1 20.42 13.895 20.42C11.69 20.42 10.04 18.815 10.04 16.265ZM26.962 21.5H28.312V16.655C28.312 14.3 26.857 13.13 24.952 13.13C23.842 13.13 22.852 13.595 22.312 14.45V13.28H20.947V21.5H22.312V16.955C22.312 15.185 23.272 14.315 24.667 14.315C26.047 14.315 26.962 15.17 26.962 16.85V21.5ZM30.5417 21.5H31.9067V10.4H30.5417V21.5ZM34.2331 21.5H35.5981V13.28H34.2331V21.5ZM34.9381 11.945C35.4331 11.945 35.8381 11.54 35.8381 11.015C35.8381 10.49 35.4331 10.085 34.9381 10.085C34.4131 10.085 34.0081 10.49 34.0081 11.015C34.0081 11.54 34.4131 11.945 34.9381 11.945ZM43.9395 21.5H45.2895V16.655C45.2895 14.3 43.8345 13.13 41.9295 13.13C40.8195 13.13 39.8295 13.595 39.2895 14.45V13.28H37.9245V21.5H39.2895V16.955C39.2895 15.185 40.2495 14.315 41.6445 14.315C43.0245 14.315 43.9395 15.17 43.9395 16.85V21.5ZM51.0143 14.3C52.4243 14.3 53.6243 15.185 53.6093 16.79H48.4193C48.5693 15.185 49.6793 14.3 51.0143 14.3ZM54.8543 18.965H53.3843C53.0843 19.85 52.3043 20.48 51.0743 20.48C49.6793 20.48 48.5093 19.565 48.4043 17.9H54.9743C55.0043 17.615 55.0193 17.375 55.0193 17.075C55.0193 14.825 53.4593 13.145 51.0743 13.145C48.6743 13.145 47.0093 14.78 47.0093 17.375C47.0093 19.985 48.7343 21.635 51.0743 21.635C53.1143 21.635 54.4343 20.465 54.8543 18.965Z"
                          fill="white"
                        />
                        <circle cx="72" cy="16" r="12" fill="white" />
                        <circle cx="72" cy="16" r="6" fill="#4391EF" />
                      </svg>
                    </div>
                  )}
                </button>
              </div>
            </div>
          </div>
          {/*  */}
        </div>
      ) : null}
      {router.asPath.includes("/auth/order") && (
        <div className="flex items-center w-full h-full p-4">
          <div className="flex items-center justify-between w-full">
            <div className="flex items-center gap-x-4">
              <div className="flex items-center">
                <div className="bg-green-500 w-10 h-10 rounded-full"></div>
                <div>
                  <svg
                    width="4"
                    height="2"
                    viewBox="0 0 4 2"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <rect
                      y="2"
                      width="2"
                      height="4"
                      rx="1"
                      transform="rotate(-90 0 2)"
                      fill="#C4C4C4"
                    />
                  </svg>
                </div>
                <div className="bg-blue-500 w-10 h-10 rounded-full"></div>
              </div>
              <div className="flex items-center gap-x-6">
                <div>
                  <div>
                    <p className="text-3xs text-custom-black">Jarak</p>
                  </div>
                  <div>
                    <p className="text-s font-semibold text-custom-black">
                      3 Km
                    </p>
                  </div>
                </div>
                <div>
                  <div>
                    <p className="text-3xs text-custom-black">Pendapatan</p>
                  </div>
                  <div>
                    <p className="text-s font-semibold text-custom-black">
                      Rp 12.000
                    </p>
                  </div>
                </div>
              </div>
            </div>
            {Order.data.orderFound === "finding" ? (
              <div>
                <p className="text-lg font-bold text-custom-black">00:59</p>
              </div>
            ) : Order.data.orderFound === "get" ? (
              <div className="flex items-center gap-x-2">
                <div>
                  <button
                    onClick={() =>
                      router.push("../hubungi-customer", "../hubungi-customer")
                    }
                  >
                    <svg
                      width="32"
                      height="32"
                      viewBox="0 0 32 32"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <circle
                        cx="16"
                        cy="16"
                        r="16"
                        fill="#414141"
                        fillOpacity="0.1"
                      />
                      <path
                        d="M21.5956 12.2589C21.8562 10.5405 20.6431 8.99307 18.79 8.42689C18.4611 8.32615 18.1061 8.35467 17.7975 8.50664C17.4889 8.6586 17.2498 8.92256 17.1291 9.2447L16.5349 10.8311C16.4392 11.0864 16.422 11.3644 16.4855 11.6295C16.549 11.8947 16.6902 12.1348 16.8912 12.319L18.6588 13.9396C18.7459 14.0197 18.8109 14.121 18.8473 14.2336C18.8837 14.3463 18.8904 14.4664 18.8666 14.5824L18.8509 14.6535L18.8071 14.832C18.7682 14.9831 18.7094 15.195 18.6266 15.4474C18.4625 15.9499 18.2006 16.6255 17.8109 17.3004C17.4211 17.976 16.9671 18.5401 16.6142 18.934C16.4305 19.1387 16.2384 19.3358 16.0385 19.5248L15.9838 19.5747C15.8954 19.6531 15.7883 19.7073 15.6727 19.732C15.5572 19.7567 15.4373 19.751 15.3246 19.7156L13.0366 18.9956C12.7768 18.9138 12.4984 18.9115 12.2372 18.9889C11.9759 19.0664 11.7438 19.2202 11.5706 19.4304L10.4882 20.7454C10.0369 21.2924 10.0902 22.0959 10.6092 22.5793C12.0274 23.9017 13.9775 24.1725 15.3342 23.0819C16.9971 21.7405 18.399 20.1045 19.4697 18.2557C20.5494 16.4083 21.2707 14.3738 21.5956 12.2589V12.2589ZM17.4341 14.6726L15.9667 13.3269C15.5651 12.9584 15.2828 12.4783 15.1559 11.9482C15.0291 11.4181 15.0636 10.8622 15.2549 10.3518L15.8498 8.76537C16.0924 8.11722 16.5732 7.58603 17.194 7.28008C17.8148 6.97413 18.5289 6.91645 19.1907 7.1188C21.491 7.82379 23.3386 9.8861 22.9475 12.464C22.674 14.2637 22.0428 16.5531 20.652 18.9436C19.497 20.9371 17.9851 22.701 16.1916 24.1472C14.1574 25.7822 11.44 25.2242 9.6765 23.5797C9.1721 23.1094 8.86603 22.4645 8.82067 21.7763C8.77531 21.0882 8.99408 20.4087 9.43238 19.8763L10.5148 18.5613C10.8613 18.1405 11.3256 17.8328 11.8481 17.6777C12.3707 17.5226 12.9277 17.5272 13.4476 17.6909L15.3465 18.2885C15.419 18.2133 15.5038 18.1237 15.5961 18.0205C15.9863 17.5887 16.3316 17.1184 16.6265 16.6166C16.9136 16.1105 17.1485 15.5764 17.3274 15.0227C17.3654 14.9068 17.4009 14.79 17.4341 14.6726V14.6726Z"
                        fill="#414141"
                      />
                    </svg>
                  </button>
                </div>
                <div>
                  <button
                    onClick={() =>
                      router.push("../chat-customer", "../chat-customer")
                    }
                  >
                    <svg
                      width="32"
                      height="32"
                      viewBox="0 0 32 32"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <circle
                        cx="16"
                        cy="16"
                        r="16"
                        fill="#414141"
                        fillOpacity="0.1"
                      />
                      <path
                        d="M12.8888 14.3889C12.8888 14.1384 12.9883 13.8982 13.1655 13.721C13.3426 13.5439 13.5828 13.4444 13.8333 13.4444H19.5C19.7504 13.4444 19.9907 13.5439 20.1678 13.721C20.3449 13.8982 20.4444 14.1384 20.4444 14.3889C20.4444 14.6393 20.3449 14.8796 20.1678 15.0567C19.9907 15.2338 19.7504 15.3333 19.5 15.3333H13.8333C13.5828 15.3333 13.3426 15.2338 13.1655 15.0567C12.9883 14.8796 12.8888 14.6393 12.8888 14.3889ZM13.8333 17.2222C13.5828 17.2222 13.3426 17.3217 13.1655 17.4988C12.9883 17.6759 12.8888 17.9162 12.8888 18.1666C12.8888 18.4171 12.9883 18.6573 13.1655 18.8345C13.3426 19.0116 13.5828 19.1111 13.8333 19.1111H17.6111C17.8615 19.1111 18.1018 19.0116 18.2789 18.8345C18.456 18.6573 18.5555 18.4171 18.5555 18.1666C18.5555 17.9162 18.456 17.6759 18.2789 17.4988C18.1018 17.3217 17.8615 17.2222 17.6111 17.2222H13.8333ZM7.22218 15.3333C7.22265 13.2627 7.90358 11.2496 9.16016 9.60392C10.4167 7.95821 12.1793 6.77105 14.1767 6.22516C16.174 5.67926 18.2954 5.80489 20.2144 6.5827C22.1333 7.36052 23.7435 8.74741 24.7971 10.5299C25.8506 12.3124 26.2892 14.3918 26.0453 16.448C25.8014 18.5042 24.8885 20.4232 23.4472 21.9098C22.0058 23.3964 20.1159 24.3681 18.0682 24.6753C16.0205 24.9826 13.9286 24.6084 12.1144 23.6104L8.4424 24.7286C8.27862 24.7785 8.10435 24.783 7.93824 24.7415C7.77214 24.7 7.62044 24.6141 7.49937 24.493C7.3783 24.3719 7.29242 24.2202 7.25092 24.0541C7.20941 23.888 7.21384 23.7138 7.26373 23.55L8.38196 19.8723C7.61876 18.4813 7.21979 16.9199 7.22218 15.3333ZM16.6666 7.77775C15.3254 7.77764 14.0083 8.13455 12.8506 8.81184C11.693 9.48912 10.7365 10.4624 10.0794 11.6316C9.42225 12.8008 9.08822 14.1239 9.11158 15.4649C9.13494 16.8059 9.51485 18.1166 10.2123 19.2622C10.2815 19.376 10.3259 19.5032 10.3425 19.6353C10.3591 19.7675 10.3476 19.9017 10.3086 20.0291L9.58518 22.4072L11.9595 21.6838C12.0873 21.6448 12.2219 21.6334 12.3544 21.6504C12.487 21.6673 12.6144 21.7122 12.7283 21.782C13.7241 22.3899 14.8471 22.759 16.0094 22.8603C17.1717 22.9616 18.3417 22.7924 19.4276 22.3659C20.5136 21.9393 21.486 21.2671 22.2687 20.4019C23.0513 19.5366 23.623 18.5019 23.9388 17.3788C24.2547 16.2556 24.3062 15.0746 24.0892 13.9283C23.8722 12.7819 23.3927 11.7014 22.6883 10.7713C21.9838 9.84131 21.0736 9.08705 20.0289 8.56768C18.9841 8.04831 17.8333 7.77794 16.6666 7.77775Z"
                        fill="#414141"
                      />
                      <path
                        d="M26.1665 9.33334C26.1665 11.2663 24.5995 12.8333 22.6665 12.8333C20.7335 12.8333 19.1665 11.2663 19.1665 9.33334C19.1665 7.40035 20.7335 5.83334 22.6665 5.83334C24.5995 5.83334 26.1665 7.40035 26.1665 9.33334Z"
                        fill="#FC4041"
                        stroke="white"
                      />
                    </svg>
                  </button>
                </div>
              </div>
            ) : (
              ""
            )}
          </div>
        </div>
      )}
    </div>
  );
};
export default Pengantaran;
